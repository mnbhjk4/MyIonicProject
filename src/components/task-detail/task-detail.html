<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="md-apps"></ion-icon>
    </button>
    <ion-title>{{title}}</ion-title>
    <div>
      <button ion-button icon-only style="background:#F000FF;width:35px;" (click)="changePriority('1')">
        <div *ngIf="task.taskStatusList[0].priority == '1';else else1">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else1>
          <ion-icon name="" ></ion-icon>
        </ng-template>
      </button>
      <button ion-button icon-only style="background:#FF4800;width:35px;" (click)="changePriority('2')">
         <div *ngIf="task.taskStatusList[0].priority  == '2';else else2">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else2>
          <ion-icon name="" style="background:#FF4800;" ></ion-icon>
        </ng-template>
      </button>
      <button ion-button icon-only style="background:#FFA200;width:35px;" (click)="changePriority('3')">
        <div *ngIf="task.taskStatusList[0].priority  == '3';else else3">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else3>
          <ion-icon name="" ></ion-icon>
        </ng-template>
      </button>
      <button ion-button icon-only style="background:#B6E903;width:35px;" (click)="changePriority('4')">
        <div *ngIf="task.taskStatusList[0].priority  == '4';else else4">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else4>
          <ion-icon name="" ></ion-icon>
        </ng-template>
      </button>
      <button ion-button icon-only style="background:#01AB99;width:35px;" (click)="changePriority('5')">
        <div *ngIf="task.taskStatusList[0].priority  == '5';else else5">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else5>
          <ion-icon name="" ></ion-icon>
        </ng-template>
      </button>
      <button ion-button icon-only style="background:#00DEFF;width:35px;" (click)="changePriority('6')">
        <div *ngIf="task.taskStatusList[0].priority  == '6';else else6">
          <ion-icon name="ios-checkmark" ></ion-icon>
        </div>
        <ng-template #else6>
          <ion-icon name="" ></ion-icon>
        </ng-template>
      </button>
    </div>
  </ion-navbar>
</ion-header>
<ion-content>
  <ion-grid>
    <ion-row>
      <div *ngFor="let owner of task.taskOwnerList">
        <ion-col><ion-label>{{this.companyUsers.get(owner.uid).name}}</ion-label></ion-col>
      </div>
      
      <ion-col><button ion-button title="Add owner" (click)="selectUsers($event)"><ion-icon name="md-person-add"></ion-icon></button></ion-col>
      
    </ion-row>
    <ion-row>
      <ion-col col-3>
        <ion-label>Task status</ion-label>
        <ion-select  [(ngModel)]="task.taskStatusList[0].status">
          <ion-option value="Not Action">
            Not Action
          </ion-option>
          <ion-option  value="Progressing">
            Progressing
          </ion-option>
          <ion-option  value="Done">
            Done
          </ion-option>
        </ion-select>
      </ion-col>
      <ion-col col-3>
        <ion-label>Start date</ion-label>
        <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="task.taskStatusList[0].startDate"></ion-datetime>
      </ion-col>

      <ion-col col-3>
        <ion-label>Due date</ion-label>
        <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="task.taskStatusList[0].dueDate"></ion-datetime>
      </ion-col>
      <ion-col col-3>
        <ion-label>Alert date</ion-label>
        <ion-datetime displayFormat="MM/DD/YYYY" [(ngModel)]="task.taskStatusList[0].alertDate"></ion-datetime>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-label>Sub Task</ion-label>
    </ion-row>
    <ion-row *ngFor="let subtask of task.subTaskList" style="border:solid 1px black">
      <ion-col col-1>
        <ion-checkbox checked="{{subtask.taskStatusList[0].status == 'Done'}}"></ion-checkbox>
      </ion-col>
      <ion-col>
        <ion-input value="{{subtask.name}}"></ion-input>
      </ion-col>
      <ion-col>
          <ion-label>Start Date</ion-label><ion-datetime displayFormat="MM/DD/YYYY"></ion-datetime>
      </ion-col>
      <ion-col>
          <ion-label>Due Date</ion-label><ion-datetime displayFormat="MM/DD/YYYY"></ion-datetime>
      </ion-col>
      <ion-col>
          <ion-label>Description</ion-label><ion-input></ion-input>
      </ion-col>
      <ion-col col-1><button ion-button (click)="removeRow(subtask)"><ion-icon name="md-remove" ></ion-icon></button></ion-col>
    </ion-row>
    <ion-row><button ion-button (click)="addRow()"><ion-icon name="md-add"></ion-icon></button></ion-row>
    <ion-row>
      <ion-col>
        <ion-label>Description</ion-label>
        <ion-textarea class="detail-description" row="5" value="{{task.taskStatusList[0].description}}"></ion-textarea>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col>
        <ion-label>Working commit
          <ion-icon name="md-attach"></ion-icon>
        </ion-label>
        <ion-input class="detail-comment"></ion-input><button ion-button><ion-icon name="ios-redo"></ion-icon></button>
      </ion-col>
    </ion-row>
    <div *ngFor="let comment of commentArray">
      <ion-row>
        <ion-col>
          <div>
            <font>{{comment.editor}}</font>
            <font *ngFor="let attachs of comment.attachs">
              <a href="{{attachs.url}}">{{attachs.title}}</a>
            </font>
          </div>
          <div>{{comment.comment_date}}</div>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <div>{{comment.comment}}</div>
        </ion-col>
      </ion-row>
    </div>
  </ion-grid>
</ion-content>